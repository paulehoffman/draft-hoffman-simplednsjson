<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.3 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-hoffman-simplednsjson" category="std">

  <front>
    <title abbrev="Simple DNS in JSON">Simple DNS Queries and Responses in JSON</title>

    <author initials="P." surname="Hoffman" fullname="Paul Hoffman">
      <organization>ICANN</organization>
      <address>
        <email>paul.hoffman@icann.org</email>
      </address>
    </author>

    <date year="2017" month="June" day="02"/>

    <area>Art</area>
    
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document describes a JSON-based format for simple DNS queries
and responses. In this case, “simple” means “only useful for
getting A and AAAA records”. This document also defines the
application/simpledns+json media type. The primary use case of this
format is programs that do not want to take on the programmatic
overhead needed to use messages in the
application/dns-udpwireformat media type.</t>

<t>[ This paragraph is to be removed when this document is published as an RFC ]
Comments on this draft can be sent to the DNS over HTTP mailing list at
<eref target="https://www.ietf.org/mailman/listinfo/dnsoverhttp">https://www.ietf.org/mailman/listinfo/dnsoverhttp</eref>.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>This document also defines the application/simpledns+json media
type. The data format in this media type allows clients to ask for
the DNS <xref target="RFC1035"/> address records (A and AAAA records) for a
domain name, and get back just the basic answer information. The
contents of the message are in JSON <xref target="RFC7159"/>.</t>

<t>The primary use case of this format is programs that do not want to
take on the programmatic overhead needed to use messages in the
application/dns-udpwireformat media type. Data in
application/simpledns+json is a JSON object with very few members
in the query or in the response, whereas using the
application/dns-udpwireformat requires a program to be able to
assemble and disassemble full DNS messages. Queries using
application/simpledns+json only let the program ask for IP address,
while queries using application/dns-udpwireformat allow any asking
for any DNS data type, and using any DNS extension.</t>

<t>The application/simpledns+json format is expected to be useful in
HTTP, such as the protocol described in
<xref target="I-D.hoffman-dns-over-https"/>.</t>

<section anchor="terminology" title="Terminology">

<t>In this document, the key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”,
“SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” are to be interpreted as
described in BCP 14, RFC 2119 <xref target="RFC2119"/>.</t>

</section>
</section>
<section anchor="using-the-simple-json-dns-query-format-in-http" title="Using the Simple JSON DNS Query Format in HTTP">

<t>When used in HTTP or similar protocols, the media type
for carrying the data described here is “application/simpledns+json”.
The body of the query, and the contents of the response, are JSON objects.
The definition of those objects is given here, but the query and
response objects MAY have other elements that are either defined later
or are based on local implementation decisions.</t>

</section>
<section anchor="queries" title="Queries">

<t>The structure of a query is:</t>

<figure><artwork><![CDATA[
{ "name": str,
  "type": str
}
]]></artwork></figure>

<t>The “name” member MUST be present in queries. The “type” member is optional in queries.</t>

<t>The name is given as a host name; IDNs <xref target="RFC5890"/> are expressed in Punycode <xref target="RFC3492"/>.</t>

<t>The type is given as a string, and one of the following three values MUST be used:
“A”, “AAAA”, and “A-and-AAAA”. If the “type” member is not
included, a server treats the query as if it was for “A-and-AAAA”.</t>

</section>
<section anchor="responses" title="Responses">

<t>The structure of a response is:</t>

<figure><artwork><![CDATA[
{ "code": int,
  "v4": [ zero or more addresses as strs ],
  "v6": [ zero or more addresses as strs ]
}
]]></artwork></figure>

<t>The “code” member MUST be present in responses. The “v4” and “v6” members are optional in responses.</t>

<t>The value for “code” MUST be one of the following:</t>

<t><list style="hanging">
  <t hangText='0:'>
  The name exists. This does not mean that A or AAAA records exist, just that the name
exists. This code can be treated similarly to a NOERROR response in DNS.</t>
  <t hangText='1:'>
  The name does not exist.
This code can be treated similarly to a NXDOMAIN response in DNS.</t>
  <t hangText='2:'>
  Service failure.
This code can be treated similarly to a SERVFAIL response in DNS.</t>
</list></t>

<t>If they are included, the “v4” and “v6” members MUST each contain a list
of strings, with each string representing a single address.</t>

</section>
<section anchor="iana" title="IANA Considerations">

<section anchor="registration-of-applicationsimplednsjson-media-type" title="Registration of application/simpledns+json Media Type">

<figure><artwork><![CDATA[
To: ietf-types@iana.org
Subject: Registration of MIME media type application/simpledns+json

MIME media type name: application

MIME subtype name: simpledns+json

Required parameters: n/a

Optional parameters: n/a

Encoding considerations: This is a binary format. The contents are
JSON {{RFC7159}}. (Note that {{RFC7159}} states that JSON is a
binary format.)

Security considerations:  See {{RFC7159}}, Section 12.

Interoperability considerations:  None.

Published specification:  This document.

Applications that use this media type: Systems that want to
exchange short DNS queries and limited DNS responses.

Additional information:

Magic number(s):  n/a

File extension(s):  n/a

Macintosh file type code(s):  n/a

Person & email address to contact for further information:
Paul Hoffman, paul.hoffman@icann.org

Intended usage:  COMMON

Restrictions on usage:  n/a

Author:  Paul Hoffman, paul.hoffman@icann.org

Change controller:  IESG
]]></artwork></figure>

</section>
</section>
<section anchor="Security" title="Security Considerations">

<t>All security considerations from <xref target="RFC7159"/> apply here.</t>

</section>
<section anchor="acknowledgments" title="Acknowledgments">

<t>Patrick McManus inspired the creation of this document.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC1035" target='http://www.rfc-editor.org/info/rfc1035'>
<front>
<title>Domain names - implementation and specification</title>
<author initials='P.V.' surname='Mockapetris' fullname='P.V. Mockapetris'><organization /></author>
<date year='1987' month='November' />
<abstract><t>This RFC is the revised specification of the protocol and format used in the implementation of the Domain Name System.  It obsoletes RFC-883. This memo documents the details of the domain name client - server communication.</t></abstract>
</front>
<seriesInfo name='STD' value='13'/>
<seriesInfo name='RFC' value='1035'/>
<seriesInfo name='DOI' value='10.17487/RFC1035'/>
</reference>



<reference  anchor="RFC2119" target='http://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC3492" target='http://www.rfc-editor.org/info/rfc3492'>
<front>
<title>Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA)</title>
<author initials='A.' surname='Costello' fullname='A. Costello'><organization /></author>
<date year='2003' month='March' />
<abstract><t>Punycode is a simple and efficient transfer encoding syntax designed for use with Internationalized Domain Names in Applications (IDNA).  It uniquely and reversibly transforms a Unicode string into an ASCII string.  ASCII characters in the Unicode string are represented literally, and non-ASCII characters are represented by ASCII characters that are allowed in host name labels (letters, digits, and hyphens). This document defines a general algorithm called Bootstring that allows a string of basic code points to uniquely represent any string of code points drawn from a larger set.  Punycode is an instance of Bootstring that uses particular parameter values specified by this document, appropriate for IDNA.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='3492'/>
<seriesInfo name='DOI' value='10.17487/RFC3492'/>
</reference>



<reference  anchor="RFC5890" target='http://www.rfc-editor.org/info/rfc5890'>
<front>
<title>Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework</title>
<author initials='J.' surname='Klensin' fullname='J. Klensin'><organization /></author>
<date year='2010' month='August' />
<abstract><t>This document is one of a collection that, together, describe the protocol and usage context for a revision of Internationalized Domain Names for Applications (IDNA), superseding the earlier version.  It describes the document collection and provides definitions and other material that are common to the set.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='5890'/>
<seriesInfo name='DOI' value='10.17487/RFC5890'/>
</reference>



<reference  anchor="RFC7159" target='http://www.rfc-editor.org/info/rfc7159'>
<front>
<title>The JavaScript Object Notation (JSON) Data Interchange Format</title>
<author initials='T.' surname='Bray' fullname='T. Bray' role='editor'><organization /></author>
<date year='2014' month='March' />
<abstract><t>JavaScript Object Notation (JSON) is a lightweight, text-based, language-independent data interchange format.  It was derived from the ECMAScript Programming Language Standard.  JSON defines a small set of formatting rules for the portable representation of structured data.</t><t>This document removes inconsistencies with other specifications of JSON, repairs specification errors, and offers experience-based interoperability guidance.</t></abstract>
</front>
<seriesInfo name='RFC' value='7159'/>
<seriesInfo name='DOI' value='10.17487/RFC7159'/>
</reference>




    </references>

    <references title='Informative References'>





<reference anchor="I-D.hoffman-dns-over-https">
<front>
<title>DNS Queries over HTTPS</title>

<author initials='P' surname='Hoffman' fullname='Paul Hoffman'>
    <organization />
</author>

<author initials='P' surname='McManus' fullname='Patrick McManus'>
    <organization />
</author>

<date month='May' day='3' year='2017' />

<abstract><t>DNS queries sometimes experience problems with end to end connectivity at times and places where HTTPS flows freely.  HTTPS provides the most practical mechanism for reliable end to end communication.  Its use of TLS provides integrity and confidentiality guarantees and its use of HTTP allows it to interoperate with proxies, firewalls, and authentication systems where required for transit.  This document describes how to run DNS service over HTTP using https:// URIs.  [ This paragraph is to be removed when this document is published as an RFC ] Comments on this draft can be sent to the DNS over HTTP mailing list at https://www.ietf.org/mailman/listinfo/dnsoverhttp .</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-hoffman-dns-over-https-00' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-hoffman-dns-over-https-00.txt' />
</reference>




    </references>



  </back>

<!-- ##markdown-source:
H4sIALajMVkAA61YbXMbuQ3+zl+BUWY6yVSSY1/SNmqnc6rtNOpEss92+jJ3
Nx1ql7IYr5Y6kmtFzbi/vQ/A3dXKb5cP9RfvLkEABB48ADUYDFS0sTAjurSr
dWHoZHZJP1TGWxNIlzldmLB2ZcCbLelvl2czpedzb273NjRLuctKvYKy3OtF
HCzdYrHS5SCIZF6Gz8GVSoUIxf/WhSshGX1llLJrL48hHr1+/e71kdLe6BGN
fVQ3mxFNymh8aeLghPWqTMcRhZgrtbYjRRRdNqKtCekxN+u4HNEbvAXnozeL
0KyG7Wr3qnQVl85DwQBLOAO+nw/pQ3KaP6WznOuq6H51/hoeHY9nM34zK22L
Ea0hNKzP+73NdFkOIadU6fxKR3tr2M+L98eHr797Wz8eHR6+qx+/e/PuqH58
+4d3r+vH3x++hYCy5aKrZDI4aQwNENKBuzV+sIxxHSA7GAxIz0P0OotKXS1t
IOSkWpkyUm5C5u2c8yrZGsx1MDkl5fyPwi6jvyQIKIaAbyAwRCIostIMW/vU
Sxt6tDK6DNRzZbGlKpgFAgZ96trEaMtrGguSxviDrsz5PPSGtO+cLoKDhwtb
wr+4NEqv1wXiGK0rD1r8/JYBBGu51RS3a8NaDK29XWkvlsUxcgvxUtVHg521
d9der1g1PuSOShdpo2E4Oor6Bnv4ZKYR5HBnikO7NDqn0pgcoYIs21iZEPR1
qoj7rnJGqny9scBZst7xVqmffkznXmuvYWe9ZOegdm4QmRXs5bRZmjrIbXB4
QzUvbFhiXXNdMjzop5/VsVuxREju8x4uEEShZJXB1AdcpqTyeejD1dU5MWg5
M9CJ2Ef1pwSgg4PNZjO0Ji4YvQcsBZgdsBSjkE8nMYHwn4cJbSub5wUq+AUX
qXd5lXEc7mPvfnrp19KrdunNddQNSm19zF1QobpwGyCysBIIHFeHG4Ffc+yv
X+vCu7sjneeAc2hwSC8fYvOV1IIGmeH8pZBAX4QAZ5rr7IY+g6fkFKggm2Et
bBDYtk5dKY6rzIG2JDkLka5xQ+C2hjGTb1zod3dDDtrTaKZvQ7N6Cs30/0Yz
nXBibPlcqdqGbMjNP5sMXtq4JDiypYXZQNtqbnxQybSQzhb8WrvSEk+fiwIN
IcBhRu2vu+nNLxXe2Hodg7rK9BwEhyjpEGAbz5zY3Ib2HdxVCGqauAzbdijG
nzut8F9hYjf2DRppct6Ar682S1uYhmPrQz1/IEE5nN2yPnZDMIpXdlUqhHOS
cFrrqxfNF4AwMCgTvp7xf4cw82WNbCWQIGo1pyPXzB59ClW2ZCKqz4mm64q2
v+Qs9/Xr031KoP7iBV0Zv7KlK9z1VqnJPdLri/Ibs6WNFGpv+unyqtdP/2l2
Js8Xpz98mlycnvDz5Yfxx4/tQ5JQeDn79LFe56fdzuOz6fR0dpI2T8f/6qXg
9c7OryZns/HHntRpOr/l+WPtTRT+Vd2T0l+Oz+nwTV8YmVt6Kml+SuekTw1m
m4lJ6qGZs7b0vqU2Dq5S/+AGUIWkXdg6tWZbaN9GO/RrSmnKUQCRae+3jTVB
xc5VriBObe9pAPSGgpC5y7cNZ0lJpsjw631K21UoB6tT6CGpEsq3bCrtcMxn
SYB9ucZMU4pnfZpXsUMCMKga5e0OZImW+hYfIOjJFCY1P6FBdsBYWUiNJqdC
I22KC8ULV+MTHClcpoFlPjhvl0BgS2a5SIKkrK74VDCYptDUKi9MrGv/LE9b
/+U/9ZV63CN6PJL6Pia0Hucjvaq7Wkg0Jbma9UiAPOcCMtKoke2aEVLfS2oa
aUTLrdlV9n0nmRSz3l08eUIghDrK9z/S5GQWEip5uOQmyKH6wnZrlJ1X5TZz
uUlSPI227Uh67L5qnAsYS6DADN9gYeGYoxL6vDF0q4sK7NYckxE9Ur0xlxu3
26bexgP8G8gXzJdJ1YOjo8GhSWRFhcbVZxeM51kGw72OoQsbwGpBlruhNMx9
9Zza9j7zaHJbyO3nl2ODhIIGJL+3b/DyI/3HeMe1uXLYXnM7t5zAWgP9nGR/
902y94AiBp8BSmckF3l4lKIJc01XlTR3MbPblKxIglKUkr3G0GNJRThwLxlR
CzfzBVNhaOd4I0mSm0CqxzEftztXpR39ZnrSqdxZl9rTJUCsJ1hJMDBa0x/a
K893IPHTi4uzi066SiZUnOtwz8fWLTEwVN+s/58nZ9PxZPaIgSM2cAn42QzR
wYAM7Hy74svTi7+/H08+PqI4QX9bT4cN1OOT2ZVkGY1GzKTMk6qWcV4hc6lC
0SNk3BKh9Al2axTJiEDcmooWkPCC5/jxbEzHcM7mxgs7gj1eWF3qO2nbF+ba
8g2zYfVnBoqptKcrbk81vK8cygj3iwFXePietcpF+bISjh890D6dTE/3xv0n
rSl1Xzbd3zs7apFQzTvr97VcpNkxl0vaCj3fhxGVB1qps6aYHqyclkg+hzTb
i9soIVqm4LkteaxPM1Yq27abIufqwXWAXs5cNKlSOt+RSSCrbnqyidWrffWv
lLo0WeVt3D5wCeg1XYV9fJBLGx0eMQ551nFryM9xR3xs/wz8AMHz9koaMCza
RR1jCOzd/SA53mWg9psvHvcucqiqbYimudU01xnzJVvqEremsHQ+dn+bkJIo
UF9cZ/y9y2/jPLct87X3MpDYVF/jLlRWXEQvwyt4Kwl8zwN5Oyp3FqY6A+27
sKQFiwhuuNA7IufAAaL3m/RbUHvFRMFLZWbpx5VF5WU42XOn+9tS/8kfkTgl
JV/ZKr6RwCzPrmczhiqXdZYC68p2Xdwap5+3iL7NyHEKM7vsQfqGd05OL//a
9KUX1CLqATk0KyCIMa5P4XHo0cK71R6UuTS3Mv9Jbx5nN6XboBavZa5DZDUf
74am2VSXFV9Rw1pKU2ZRpth2stxD3P8A1Iii0dcUAAA=

-->

</rfc>

